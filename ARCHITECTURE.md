# Architecture & Technical Design

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT (Browser)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Next.js 14 Application (SSR/SSG)              â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  App Router Pages:                                         â”‚ â”‚
â”‚  â”‚  â€¢ Homepage (SSG)                                          â”‚ â”‚
â”‚  â”‚  â€¢ Invoice Generator (Client-side)                        â”‚ â”‚
â”‚  â”‚  â€¢ SEO Pages (SSG): GST, Proforma, Tax, Freelancer      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              React Components Layer                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ Invoice Form (controlled inputs)                       â”‚ â”‚
â”‚  â”‚  â€¢ Invoice Preview (real-time)                           â”‚ â”‚
â”‚  â”‚  â€¢ Template Selector                                      â”‚ â”‚
â”‚  â”‚  â€¢ UI Components (Button, Input, Card, etc.)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              State Management (Zustand)                    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ Invoice Store (persisted to localStorage)             â”‚ â”‚
â”‚  â”‚  â€¢ Company & Client Data                                  â”‚ â”‚
â”‚  â”‚  â€¢ Line Items                                             â”‚ â”‚
â”‚  â”‚  â€¢ Calculations (auto-compute)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILITY LAYER (Browser)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ PDF Generator (jsPDF + html2canvas)                         â”‚
â”‚  â€¢ Print Handler                                                â”‚
â”‚  â€¢ Image Exporter                                               â”‚
â”‚  â€¢ SEO Metadata Generator                                       â”‚
â”‚  â€¢ Invoice Calculations                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Supabase)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  PostgreSQL Database â”‚  â”‚  Authentication      â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  â€¢ profiles          â”‚  â”‚  â€¢ Google OAuth      â”‚           â”‚
â”‚  â”‚  â€¢ invoices          â”‚  â”‚  â€¢ Email/Password    â”‚           â”‚
â”‚  â”‚  â€¢ blog_posts        â”‚  â”‚  â€¢ Session Mgmt      â”‚           â”‚
â”‚  â”‚  â€¢ RLS Policies      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  Storage             â”‚                                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚
â”‚  â”‚  â€¢ logos bucket      â”‚                                       â”‚
â”‚  â”‚  â€¢ Public access     â”‚                                       â”‚
â”‚  â”‚  â€¢ Auto-optimization â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow

### Creating an Invoice (Guest Mode)

```
1. User enters invoice-generator page
   â”‚
   â”œâ”€â†’ Next.js SSR renders page
   â”‚
   â””â”€â†’ Client-side hydration
       â”‚
       â”œâ”€â†’ Load Zustand store from localStorage (if exists)
       â”‚
       â””â”€â†’ Initialize empty invoice state

2. User fills form fields
   â”‚
   â”œâ”€â†’ onChange events trigger
   â”‚
   â”œâ”€â†’ Zustand store updates
   â”‚
   â”œâ”€â†’ Auto-calculations run (subtotal, tax, total)
   â”‚
   â””â”€â†’ Invoice Preview re-renders (real-time)

3. User uploads logo
   â”‚
   â”œâ”€â†’ File selected via file input
   â”‚
   â”œâ”€â†’ FileReader converts to base64
   â”‚
   â””â”€â†’ Store in Zustand (temporarily)
       â”‚
       â””â”€â†’ Preview shows logo immediately

4. User adds/removes line items
   â”‚
   â”œâ”€â†’ Add/Remove item in array
   â”‚
   â”œâ”€â†’ Recalculate amounts
   â”‚
   â””â”€â†’ Update preview

5. User clicks "Download PDF"
   â”‚
   â”œâ”€â†’ Get invoice-preview DOM element
   â”‚
   â”œâ”€â†’ html2canvas renders to canvas
   â”‚
   â”œâ”€â†’ jsPDF creates PDF from canvas
   â”‚
   â””â”€â†’ Browser downloads file
```

### Saving an Invoice (Authenticated Users)

```
1. User logs in
   â”‚
   â”œâ”€â†’ Supabase Auth handles login
   â”‚
   â”œâ”€â†’ Session created
   â”‚
   â””â”€â†’ User redirected to dashboard

2. User creates invoice (same as above)
   â”‚
   â””â”€â†’ Additional "Save" button appears

3. User clicks "Save Invoice"
   â”‚
   â”œâ”€â†’ Serialize invoice data
   â”‚
   â”œâ”€â†’ Upload logo to Supabase Storage (if new)
   â”‚   â”‚
   â”‚   â”œâ”€â†’ Get public URL
   â”‚   â”‚
   â”‚   â””â”€â†’ Replace base64 with URL
   â”‚
   â”œâ”€â†’ Insert into invoices table
   â”‚   â”‚
   â”‚   â””â”€â†’ RLS policy checks user_id
   â”‚
   â””â”€â†’ Return invoice ID
       â”‚
       â””â”€â†’ Show success toast
```

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER ACTIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â†’ Type in form field
               â”‚    â”‚
               â”‚    â””â”€â”€â†’ onChange event
               â”‚         â”‚
               â”‚         â””â”€â”€â†’ Update Zustand Store
               â”‚              â”‚
               â”‚              â”œâ”€â”€â†’ Calculate totals
               â”‚              â”‚
               â”‚              â””â”€â”€â†’ Trigger re-render
               â”‚                   â”‚
               â”‚                   â””â”€â”€â†’ Preview updates
               â”‚
               â”œâ”€â”€â†’ Upload logo
               â”‚    â”‚
               â”‚    â””â”€â”€â†’ FileReader
               â”‚         â”‚
               â”‚         â””â”€â”€â†’ Convert to base64
               â”‚              â”‚
               â”‚              â””â”€â”€â†’ Store in Zustand
               â”‚                   â”‚
               â”‚                   â””â”€â”€â†’ Preview shows logo
               â”‚
               â”œâ”€â”€â†’ Select template
               â”‚    â”‚
               â”‚    â””â”€â”€â†’ Update template in store
               â”‚         â”‚
               â”‚         â””â”€â”€â†’ Preview switches template
               â”‚
               â””â”€â”€â†’ Export action (PDF/Print/Image)
                    â”‚
                    â””â”€â”€â†’ Get preview element
                         â”‚
                         â””â”€â”€â†’ html2canvas
                              â”‚
                              â”œâ”€â”€â†’ For PDF: jsPDF
                              â”œâ”€â”€â†’ For Print: window.print()
                              â””â”€â”€â†’ For Image: canvas.toBlob()
```

## ğŸ¨ Component Tree

```
App (Root Layout)
â”‚
â”œâ”€â”€ ThemeProvider (next-themes)
â”‚   â”‚
â”‚   â””â”€â”€ Page Content
â”‚       â”‚
â”‚       â”œâ”€â”€ Header
â”‚       â”‚   â”œâ”€â”€ Logo/Brand
â”‚       â”‚   â”œâ”€â”€ Navigation Links
â”‚       â”‚   â””â”€â”€ ThemeToggle
â”‚       â”‚
â”‚       â””â”€â”€ Main Content Area
â”‚           â”‚
â”‚           â”œâ”€â”€ Homepage
â”‚           â”‚   â”œâ”€â”€ Hero Section
â”‚           â”‚   â”œâ”€â”€ Features Grid (Cards)
â”‚           â”‚   â”œâ”€â”€ CTA Section
â”‚           â”‚   â””â”€â”€ Footer
â”‚           â”‚
â”‚           â””â”€â”€ Invoice Generator Page
â”‚               â”‚
â”‚               â”œâ”€â”€ TemplateSelector
â”‚               â”‚   â””â”€â”€ Template Options (3 buttons)
â”‚               â”‚
â”‚               â””â”€â”€ Two-Column Layout
â”‚                   â”‚
â”‚                   â”œâ”€â”€ Left Column (Form)
â”‚                   â”‚   â”‚
â”‚                   â”‚   â”œâ”€â”€ CompanyDetailsCard
â”‚                   â”‚   â”‚   â”œâ”€â”€ LogoUpload
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: name
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: email
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: phone
â”‚                   â”‚   â”‚   â”œâ”€â”€ Textarea: address
â”‚                   â”‚   â”‚   â””â”€â”€ Input: GST/VAT
â”‚                   â”‚   â”‚
â”‚                   â”‚   â”œâ”€â”€ ClientDetailsCard
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: name
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: email
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: phone
â”‚                   â”‚   â”‚   â””â”€â”€ Textarea: address
â”‚                   â”‚   â”‚
â”‚                   â”‚   â”œâ”€â”€ InvoiceDatesCard
â”‚                   â”‚   â”‚   â”œâ”€â”€ Input: invoiceDate
â”‚                   â”‚   â”‚   â””â”€â”€ Input: dueDate
â”‚                   â”‚   â”‚
â”‚                   â”‚   â”œâ”€â”€ LineItemsCard
â”‚                   â”‚   â”‚   â”œâ”€â”€ ItemRow 1
â”‚                   â”‚   â”‚   â”‚   â”œâ”€â”€ Input: name
â”‚                   â”‚   â”‚   â”‚   â”œâ”€â”€ Textarea: description
â”‚                   â”‚   â”‚   â”‚   â”œâ”€â”€ Input: quantity
â”‚                   â”‚   â”‚   â”‚   â”œâ”€â”€ Input: price
â”‚                   â”‚   â”‚   â”‚   â”œâ”€â”€ Input: taxRate
â”‚                   â”‚   â”‚   â”‚   â””â”€â”€ Button: remove
â”‚                   â”‚   â”‚   â”œâ”€â”€ ItemRow 2...
â”‚                   â”‚   â”‚   â””â”€â”€ Button: Add Item
â”‚                   â”‚   â”‚
â”‚                   â”‚   â””â”€â”€ AdditionalDetailsCard
â”‚                   â”‚       â”œâ”€â”€ Input: discount
â”‚                   â”‚       â”œâ”€â”€ Textarea: notes
â”‚                   â”‚       â””â”€â”€ Textarea: terms
â”‚                   â”‚
â”‚                   â””â”€â”€ Right Column (Preview - Sticky)
â”‚                       â”‚
â”‚                       â”œâ”€â”€ InvoicePreview (Card)
â”‚                       â”‚   â”‚
â”‚                       â”‚   â””â”€â”€ Selected Template
â”‚                       â”‚       â”‚
â”‚                       â”‚       â”œâ”€â”€ MinimalTemplate
â”‚                       â”‚       â”œâ”€â”€ ProfessionalTemplate
â”‚                       â”‚       â””â”€â”€ ModernTemplate
â”‚                       â”‚
â”‚                       â””â”€â”€ InvoiceActions (Buttons)
â”‚                           â”œâ”€â”€ Download PDF
â”‚                           â”œâ”€â”€ Print
â”‚                           â”œâ”€â”€ Download Image
â”‚                           â””â”€â”€ Share
â”‚
â””â”€â”€ ToastProvider (react-hot-toast)
```

## ğŸ” Authentication Flow (Optional Feature)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User clicks    â”‚
â”‚  "Sign In"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â†’ Redirect to /login
         â”‚
         â”œâ”€â”€â†’ Choose provider
         â”‚    â”‚
         â”‚    â”œâ”€â”€â†’ Google OAuth
         â”‚    â”‚    â”‚
         â”‚    â”‚    â”œâ”€â”€â†’ Redirect to Google
         â”‚    â”‚    â”œâ”€â”€â†’ User authorizes
         â”‚    â”‚    â”œâ”€â”€â†’ Redirect back with code
         â”‚    â”‚    â””â”€â”€â†’ Supabase exchanges code for session
         â”‚    â”‚
         â”‚    â””â”€â”€â†’ Email/Password
         â”‚         â”‚
         â”‚         â”œâ”€â”€â†’ Enter credentials
         â”‚         â”œâ”€â”€â†’ Supabase validates
         â”‚         â””â”€â”€â†’ Create session
         â”‚
         â””â”€â”€â†’ Session created
              â”‚
              â”œâ”€â”€â†’ Cookie set
              â”‚
              â””â”€â”€â†’ Redirect to /dashboard
                   â”‚
                   â”œâ”€â”€â†’ Load user's invoices
                   â”‚
                   â””â”€â”€â†’ Show invoice history
```

## ğŸ’¾ Data Persistence

### Guest Mode (No Auth)
```
Browser localStorage
â”œâ”€â”€ invoice-storage
â”‚   â””â”€â”€ invoice: {
â”‚       company: {...},
â”‚       client: {...},
â”‚       items: [...],
â”‚       totals: {...}
â”‚   }
```

### Authenticated Mode
```
Supabase Database
â”œâ”€â”€ profiles table
â”‚   â””â”€â”€ user record
â”‚
â”œâ”€â”€ invoices table
â”‚   â”œâ”€â”€ invoice 1 (user_id = current_user)
â”‚   â”œâ”€â”€ invoice 2 (user_id = current_user)
â”‚   â””â”€â”€ invoice 3 (user_id = current_user)
â”‚
â””â”€â”€ Storage
    â””â”€â”€ logos/
        â”œâ”€â”€ user_id/logo1.png
        â””â”€â”€ user_id/logo2.png
```

## ğŸ¯ Performance Optimization Strategy

```
1. Static Site Generation (SSG)
   â”‚
   â”œâ”€â”€â†’ Homepage (pre-rendered)
   â”œâ”€â”€â†’ SEO pages (pre-rendered)
   â””â”€â”€â†’ Blog posts (pre-rendered)

2. Code Splitting
   â”‚
   â”œâ”€â”€â†’ Route-based (automatic with App Router)
   â”œâ”€â”€â†’ Component-based (dynamic imports)
   â””â”€â”€â†’ Library splitting (vendor chunks)

3. Image Optimization
   â”‚
   â”œâ”€â”€â†’ Next.js Image component
   â”œâ”€â”€â†’ WebP/AVIF formats
   â””â”€â”€â†’ Lazy loading

4. Caching Strategy
   â”‚
   â”œâ”€â”€â†’ Static assets (1 year)
   â”œâ”€â”€â†’ API responses (5 minutes)
   â””â”€â”€â†’ Database queries (RLS + indexes)

5. Client-side State
   â”‚
   â”œâ”€â”€â†’ Zustand (lightweight)
   â”œâ”€â”€â†’ localStorage persistence
   â””â”€â”€â†’ No prop drilling
```

## ğŸ” SEO Strategy Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SEO Landing Pages                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  /invoice-generator                                         â”‚
â”‚  â”‚  â”œâ”€â†’ Target: "invoice generator", "free invoice"       â”‚
â”‚  â”‚  â”œâ”€â†’ Meta tags + OG tags                                â”‚
â”‚  â”‚  â””â”€â†’ Schema.org markup                                  â”‚
â”‚                                                              â”‚
â”‚  /gst-invoice-generator                                     â”‚
â”‚  â”‚  â”œâ”€â†’ Target: "gst invoice", "gst bill"                 â”‚
â”‚  â”‚  â””â”€â†’ Same component, different SEO                      â”‚
â”‚                                                              â”‚
â”‚  /proforma-invoice-generator                                â”‚
â”‚  â”‚  â””â”€â†’ Target: "proforma invoice", "quotation"           â”‚
â”‚                                                              â”‚
â”‚  /tax-invoice-generator                                     â”‚
â”‚  â”‚  â””â”€â†’ Target: "tax invoice", "vat invoice"              â”‚
â”‚                                                              â”‚
â”‚  /freelancer-invoice-template                               â”‚
â”‚  â”‚  â””â”€â†’ Target: "freelancer invoice", "contractor"        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Content Marketing Strategy                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Blog Posts (stored in Supabase)                           â”‚
â”‚  â”‚                                                          â”‚
â”‚  â”œâ”€â†’ "How to Create Professional Invoices"                â”‚
â”‚  â”œâ”€â†’ "GST Invoice Requirements in 2026"                    â”‚
â”‚  â”œâ”€â†’ "Freelancer Invoice Best Practices"                   â”‚
â”‚  â””â”€â†’ "Tax Invoice vs Regular Invoice"                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Technical SEO Implementation                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â€¢ Sitemap.xml (auto-generated)                            â”‚
â”‚  â€¢ Robots.txt                                               â”‚
â”‚  â€¢ Structured Data (JSON-LD)                               â”‚
â”‚  â€¢ Open Graph tags                                          â”‚
â”‚  â€¢ Twitter Cards                                            â”‚
â”‚  â€¢ Canonical URLs                                           â”‚
â”‚  â€¢ Fast loading (< 1s)                                     â”‚
â”‚  â€¢ Mobile responsive                                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â†“                   â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment  â”‚  â”‚  Row Level   â”‚  â”‚  Next.js     â”‚
â”‚  Variables   â”‚  â”‚   Security   â”‚  â”‚ Middleware   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Client     â”‚  â”‚ â€¢ profiles   â”‚  â”‚ â€¢ Auth check â”‚
â”‚   NEXT_      â”‚  â”‚   RLS        â”‚  â”‚ â€¢ Protected  â”‚
â”‚   PUBLIC_*   â”‚  â”‚              â”‚  â”‚   routes     â”‚
â”‚              â”‚  â”‚ â€¢ invoices   â”‚  â”‚              â”‚
â”‚ â€¢ Server     â”‚  â”‚   RLS        â”‚  â”‚ â€¢ Session    â”‚
â”‚   SUPABASE_  â”‚  â”‚              â”‚  â”‚   refresh    â”‚
â”‚   SERVICE_   â”‚  â”‚ â€¢ storage    â”‚  â”‚              â”‚
â”‚   ROLE_KEY   â”‚  â”‚   policies   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Input Validation     â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Zod schemas         â”‚
        â”‚ â€¢ TypeScript types    â”‚
        â”‚ â€¢ Form validation     â”‚
        â”‚ â€¢ Sanitization        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture is designed for:
- âœ… Scalability
- âœ… Performance
- âœ… Security
- âœ… Maintainability
- âœ… SEO Optimization
- âœ… Developer Experience
